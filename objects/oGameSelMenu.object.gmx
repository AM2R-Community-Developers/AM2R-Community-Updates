<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sMslSpark</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
x = 269;
y = 172 - 10; // - 10 added for gameplay menu
global.curropt = 0;
global.saveslot = 0;
lastitem = 7;
active = 0;
alarm[0] = 5;
event_user(0);
event_user(10);
image_alpha = 0;
fadein = 0;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>active = 1;
fadein = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(oSlotMenu_Fusion)) op[3].hide = 1; // stop from selecting ID 3 when Fusion Difficulty is being selected
else op[3].hide = 0;


if (active) {
    if (oControl.kDown &amp;&amp; oControl.kDownPushedSteps == 0) {
        global.curropt += 1;
        if (global.curropt &gt; lastitem) global.curropt = 0;
        global.saveslot = global.curropt;
        sfx_play(sndMenuMove);
    }
    if (oControl.kUp &amp;&amp; oControl.kUpPushedSteps == 0) {
        global.curropt -= 1;
        if (global.curropt &lt; 0) global.curropt = lastitem;
        global.saveslot = global.curropt;
        sfx_play(sndMenuMove);
    }
    if (oControl.kMenu1 &amp;&amp; oControl.kMenu1PushedSteps == 0) {
        sfx_play(sndMenuSel);
        if (global.curropt &gt;= 0 &amp;&amp; global.curropt &lt; 3) {
            if (op[global.curropt].saveexists == 0) {
 
                if (global.mod_gamebeaten == 1)  { instance_create(0, 0, oSlotMenu_gametypes); }
                else { instance_create(0, 0, oSlotMenu_normal_only); }
                active = 0;
            } else {
                instance_create(0, 0, oSlotMenu1);
                active = 0;
            }
        }
        
        if (global.curropt == 4) {
            room_persistent = true;
            room_change(rm_options, 0);
        }
        
        if (global.curropt == 5 &amp;&amp; op[5].enabled) {
            room_persistent = true;
            room_change(rm_gallery, 0);
        }
        if (global.curropt == 6) {
            room_persistent = true;
            global.creditsmenuopt = 1;
            room_change(rm_credits, 0);
        }
        if (global.curropt == 3 &amp;&amp; op[3].enabled) {
            room_persistent = true;
            room_change(rm_gameplay, 0);
        }
        if (global.curropt == 7) game_end();
    } // if (oControl.kMenu1 &amp;&amp; oControl.kMenu1PushedSteps == 0)
} // if (active)
if (image_alpha &lt; 1 &amp;&amp; fadein) image_alpha += 0.05;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>tip1text = get_text("Title", "Tip1");
tip2text = get_text("Title", "Tip2");
op[4].label = get_text("Title", "Options");
op[5].label = get_text("Title", "Gallery");
op[6].label = get_text("Title", "Credits");
op[3].label = get_text("GameplayMenu", "Gameplay");
op[7].label = get_text("Title", "Exit");
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var detail;
j = 0;
repeat (3) {
    filename = "save" + string(j + 1);
    if (file_exists(filename)) {
        detail = sv6_load_details(filename);
        if (detail == 1) {
            op[j].smonsters = global.monstersleft;
            op[j].timestring = steps_to_time2(global.gametime);
            op[j].saveroom = global.save_room;
            op[j].setanks = global.etanks;
            op[j].sprogress = string(round(global.itemstaken / 88 * 100));
            op[j].saveexists = file_exists(filename);
            op[j].sdifficulty = global.difficulty;
            if(oControl.seed != "") op[j].sseed = " [" + string(oControl.seed) + "]";
            else op[j].sseed = "";
            op[j].smode = global.gamemode;
            if (oControl.mod_fusion == 1) { op[j].sdifficulty = 3 } ;
        } else op[j].saveexists = 0;
    } else op[j].saveexists = 0;
    with (op[j]) event_user(0);
    j += 1;
}
scr_default_global_items();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(op[3])) with (op[3]) instance_destroy();
if (instance_exists(op[4])) with (op[4]) instance_destroy();
if (instance_exists(op[5])) with (op[5]) instance_destroy();
if (instance_exists(op[6])) with (op[6]) instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var space;
op[0] = instance_create(64, 40, oMenuSaveSlot);
op[0].slot = 0;
op[1] = instance_create(64, 84, oMenuSaveSlot);
op[1].slot = 1;
op[2] = instance_create(64, 128, oMenuSaveSlot);
op[2].slot = 2;
event_user(2);
space = 14;
i = 0;

op[3] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[3].optionid = 3;
op[3].label = get_text("GameplayMenu", "Gameplay");
op[3].enabled = global.mod_gamebeaten;
i += 1;

op[4] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[4].optionid = 4;
op[4].label = get_text("Title", "Options");
//op[4].hide = 1;

i += 1;
op[5] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[5].optionid = 5;
op[5].label = get_text("Title", "Gallery");
//op[4].enabled = global.unlock[0] == 1 || global.unlock[1] == 1 || global.unlock[2] == 1;
op[5].enabled = global.gallery[0] == 1 || global.gallery[1] == 1 || global.gallery[2] == 1;
i += 1;
op[6] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[6].optionid = 6;
op[6].label = get_text("Title", "Credits");
i += 1;
/*op[6] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[6].optionid = 6;
op[6].label = get_text("GameplayMenu", "Gameplay");
i += 1;*/
op[7] = instance_create(x + 120, y + space * i, oNormalOptionR);
op[7].optionid = 7;
op[7].label = get_text("Title", "Exit");
i += 1;
i = 3;
repeat (5) {
    op[i].targetx = x;
    op[i].alarm[0] = 1;
    op[i].depth = 0;
    i += 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_persistent = false;
event_user(10);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

if (active) {
    draw_txt_1button(view_xview[0] + 2, view_yview[0] + 225, tip1text, 1, "Menu1", image_alpha);
} else {
    draw_txt_1button(view_xview[0] + 2, view_yview[0] + 212, tip1text, 1, "Menu1", image_alpha);
    draw_txt_1button(view_xview[0] + 2, view_yview[0] + 225, tip2text, 1, "Menu2", image_alpha);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>-1</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
